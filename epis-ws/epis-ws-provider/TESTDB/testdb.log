/*C5*/SET SCHEMA PUBLIC
create table TBL_CONFIG_AGENT (\u000a\u0009agent_id VARCHAR2(4000) not null primary key\u000a\u0009,org_code VARCHAR2(4000)\u000a\u0009,operating_system VARCHAR2(4000)\u000a\u0009,charset VARCHAR2(4000)\u000a\u0009,websvc_user VARCHAR2(4000)\u000a\u0009,websvc_pass VARCHAR2(4000)\u000a\u0009,officer_name VARCHAR2(4000)\u000a\u0009,officer_contact VARCHAR2(4000)\u000a\u0009,sms_use_yn CHAR\u000a\u0009,sms_cell_no VARCHAR2(4000)\u000a\u0009,created_date TIMESTAMP\u000a\u0009,modified_date TIMESTAMP\u000a)\u000d\u000a
create table TBL_CONFIG_JOB (\u000a\u0009job_id VARCHAR2(4000) not null primary key\u000a\u0009,agent_id VARCHAR2(4000)\u000a\u0009,job_name VARCHAR2(4000)\u000a\u0009,job_type VARCHAR2(4000)\u000a\u0009,agent_exec_time VARCHAR2(4000)\u000a\u0009,sql_main VARCHAR2(4000)\u000a\u0009,sql_pre VARCHAR2(4000)\u000a\u0009,sql_post VARCHAR2(4000)\u000a\u0009,jdbc_driver_class_name VARCHAR2(4000)\u000a\u0009,jdbc_url VARCHAR2(4000)\u000a\u0009,jdbc_username VARCHAR2(4000)\u000a\u0009,jdbc_password VARCHAR2(4000)\u000a\u0009,server_sql VARCHAR2(4000)\u000a\u0009,created_date TIMESTAMP\u000a\u0009,modified_date TIMESTAMP\u000a)\u000d\u000a
CREATE TABLE TBL_IF_LOG(\u000a\u0009log_id VARCHAR2(4000) primary key\u000a\u0009,agent_id VARCHAR2(4000)\u000a\u0009,job_id VARCHAR2(4000)\u000a\u0009,result_flag CHAR(1)\u000a\u0009,create_date TIMESTAMP\u000a)\u000d\u000a
create sequence seq_agent start with 1 increment by 1 maxvalue 1000000\u000d\u000a
create sequence seq_job start with 1 increment by 1 maxvalue 1000000\u000d\u000a
create sequence seq_log start with 1 increment by 1 maxvalue 1000000\u000d\u000a
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
CREATE TABLE if_src_job1(\u000d\u000a\u0009MARKET_CODE\u0009\u0009VARCHAR2(4000) NOT NULL PRIMARY KEY\u000d\u000a\u0009,AREA_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,ITEM_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,KIND_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,SURVEY_DATE\u0009TIMESTAMP\u000d\u000a\u0009,SURVEY_GRADE\u0009VARCHAR2(4000)\u000d\u000a\u0009,TODAY_PRICE\u0009NUMBER(15,3)\u000d\u000a\u0009,YESDAY_PRICE\u0009NUMBER(15,3)\u000d\u000a\u0009,IN_QTY\u0009\u0009\u0009NUMBER(15)\u000d\u000a\u0009,TRADE_QTY\u0009\u0009NUMBER(15)\u000d\u000a\u0009,STEADY_TIMES\u0009NUMBER(15)\u000d\u000a\u0009,BIGO\u0009\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,WORK_TYPE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,INSPECT_SUM\u0009NUMBER(15)\u000d\u000a\u0009,TOT_SURVEY\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UPDATE_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,COUNT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UNIT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,RNF_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,EDATE\u0009\u0009\u0009TIMESTAMP DEFAULT SYSTIMESTAMP\u000d\u000a\u0009,EFLAG\u0009\u0009\u0009CHAR(1) DEFAULT 'I'\u0009NOT NULL\u000d\u000a)
CREATE TABLE src_job1_part_a(\u000d\u000a\u0009MARKET_CODE\u0009\u0009VARCHAR2(4000) NOT NULL PRIMARY KEY\u000d\u000a\u0009,AREA_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,ITEM_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,KIND_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,SURVEY_DATE\u0009TIMESTAMP\u000d\u000a\u0009,SURVEY_GRADE\u0009VARCHAR2(4000)\u000d\u000a\u0009,INSPECT_SUM\u0009NUMBER(15)\u000d\u000a\u0009,TOT_SURVEY\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UPDATE_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,COUNT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UNIT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,RNF_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a)
CREATE TABLE src_job1_part_b(\u000d\u000a\u0009MARKET_CODE\u0009\u0009VARCHAR2(4000) NOT NULL PRIMARY KEY\u000d\u000a\u0009,AREA_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,TODAY_PRICE\u0009NUMBER(15,2)\u000d\u000a\u0009,YESDAY_PRICE\u0009NUMBER(15,2)\u000d\u000a\u0009,IN_QTY\u0009\u0009\u0009NUMBER(15)\u000d\u000a\u0009,TRADE_QTY\u0009\u0009NUMBER(15)\u000d\u000a\u0009,STEADY_TIMES\u0009NUMBER(15)\u000d\u000a\u0009,BIGO\u0009\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,WORK_TYPE\u0009\u0009VARCHAR2(4000)\u000d\u000a)
INSERT INTO SRC_JOB1_PART_A VALUES('MARKET-N','\uad6c\uc5ed-N','ITEM-N','KIND-N','2013-12-03 16:06:12.376000','F--',10,'TOTAL-N','UPD-A10','CNT-10','UNIT-10','RNF-110')
INSERT INTO SRC_JOB1_PART_A VALUES('MARKET-O','\uad6c\uc5ed-O','ITEM-O','KIND-O','2013-12-03 16:06:12.377000','D+',50,'TOTAL-O','UPD-A11','CNT-11','UNIT-11','RNF-111')
INSERT INTO SRC_JOB1_PART_A VALUES('MARKET-P','\uad6c\uc5ed-P','ITEM-P','KIND-P','2013-12-03 16:06:12.377000','B++',80,'TOTAL-P','UPD-A12','CNT-12','UNIT-12','RNF-112')
COMMIT
INSERT INTO SRC_JOB1_PART_B VALUES('MARKET-N','\uad6c\uc5ed-N',10028.03,8012.87,10,100,300,'\ube44\uace0\ubb34','H')
INSERT INTO SRC_JOB1_PART_B VALUES('MARKET-O','\uad6c\uc5ed-O',9021.13,9010.32,70,50,104,'\ubb34\ube44\uace0','S')
INSERT INTO SRC_JOB1_PART_B VALUES('MARKET-P','\uad6c\uc5ed-P',50154.03,4705.69,210,30,80,'\uace0\ubb34\ube44','M')
COMMIT
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
CREATE TABLE if_tgt_job1(\u000d\u000a\u0009MARKET_CODE\u0009\u0009VARCHAR2(4000) NOT NULL PRIMARY KEY\u000d\u000a\u0009,AREA_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,ITEM_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,KIND_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,SURVEY_DATE\u0009TIMESTAMP\u000d\u000a\u0009,SURVEY_GRADE\u0009VARCHAR2(4000)\u000d\u000a\u0009,TODAY_PRICE\u0009NUMBER(15,3)\u000d\u000a\u0009,YESDAY_PRICE\u0009NUMBER(15,3)\u000d\u000a\u0009,IN_QTY\u0009\u0009\u0009NUMBER(15)\u000d\u000a\u0009,TRADE_QTY\u0009\u0009NUMBER(15)\u000d\u000a\u0009,STEADY_TIMES\u0009NUMBER(15)\u000d\u000a\u0009,BIGO\u0009\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,WORK_TYPE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,INSPECT_SUM\u0009NUMBER(15)\u000d\u000a\u0009,TOT_SURVEY\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UPDATE_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,COUNT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,UNIT_NO\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,RNF_CODE\u0009\u0009VARCHAR2(4000)\u000d\u000a\u0009,EDATE\u0009\u0009\u0009TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL\u000d\u000a\u0009,EFLAG\u0009\u0009\u0009CHAR(1) DEFAULT 'I'\u0009NOT NULL\u000d\u000a)\u000d\u000a
CREATE TABLE if_tgt_job2_com_seed (\u000d\u000a\u0009IDX \u0009\u0009DOUBLE NOT NULL PRIMARY KEY\u000d\u000a\u0009,COM_NAME\u0009VARCHAR2(255)\u000d\u000a\u0009,ITEM_CD\u0009DOUBLE\u000d\u000a\u0009,ITEM_NM\u0009VARCHAR2(255)\u000d\u000a\u0009,ITEM_IMG\u0009VARCHAR2(255)\u000d\u000a\u0009,DTL_IMG\u0009VARCHAR2(255)\u000d\u000a\u0009,SUBJECT\u0009VARCHAR2(1000)\u000d\u000a\u0009,ITEM_SPEC\u0009VARCHAR2(4000)\u000d\u000a\u0009,CAUTION\u0009VARCHAR2(4000)\u000d\u000a\u0009,EDATE\u0009\u0009TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL\u000d\u000a\u0009,EFLAG\u0009\u0009CHAR(1) DEFAULT 'I' NOT NULL\u000d\u000a)\u000d\u000a
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
INSERT INTO TBL_CONFIG_AGENT VALUES('AGENT-1','','Windows','EUC-KR','jack','jackass','\uae40\uae38\ub3d9','011-111-2222','N',NULL,'2013-12-03 16:20:22.422000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_AGENT RESTART WITH 2
INSERT INTO TBL_CONFIG_AGENT VALUES('AGENT-2','','Unix','EUC-KR','alice','chain','\ud64d\uae38\ub3d9','017-222-3333','N',NULL,'2013-12-03 16:20:53.340000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_AGENT RESTART WITH 3
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-1','AGENT-1','\uc720\ud1b5\uacf5\uc0ac','AGENT','11:00','SELECT * FROM if_src_job1 WHERE eflag=''I'' AND TO_CHAR(edate,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','INSERT INTO if_src_job1 (\u000d\u000a\u0009MARKET_CODE,AREA_CODE,ITEM_CODE,KIND_CODE,SURVEY_DATE,SURVEY_GRADE,INSPECT_SUM,TOT_SURVEY,UPDATE_NO,COUNT_NO,UNIT_NO,RNF_CODE\u000d\u000a\u0009,TODAY_PRICE,YESDAY_PRICE,IN_QTY,TRADE_QTY,STEADY_TIMES,BIGO,WORK_TYPE\u000d\u000a) SELECT \u000d\u000a\u0009a.MARKET_CODE,a.AREA_CODE,a.ITEM_CODE,a.KIND_CODE,a.SURVEY_DATE,a.SURVEY_GRADE,a.INSPECT_SUM,a.TOT_SURVEY,a.UPDATE_NO,a.COUNT_NO,a.UNIT_NO,a.RNF_CODE\u000d\u000a\u0009,b.TODAY_PRICE,b.YESDAY_PRICE,b.IN_QTY,b.TRADE_QTY,b.STEADY_TIMES,b.BIGO,b.WORK_TYPE\u000d\u000aFROM\u000d\u000a\u0009src_job1_part_a a\u000d\u000a\u0009\u0009LEFT OUTER JOIN src_job1_part_b b\u000d\u000a\u0009\u0009ON a.MARKET_CODE=b.MARKET_CODE\u000d\u000aWHERE\u000d\u000a\u0009TO_CHAR(a.SURVEY_DATE,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','UPDATE if_src_job1 SET EFLAG=:EFLAG WHERE MARKET_CODE=:MARKET_CODE','org.hsqldb.jdbcDriver','jdbc:hsqldb:hsql://localhost/testdb','sa','1','INSERT INTO if_tgt_job1 (\u000d\u000a\u0009MARKET_CODE, AREA_CODE, ITEM_CODE, KIND_CODE, SURVEY_DATE, SURVEY_GRADE, TODAY_PRICE, YESDAY_PRICE, IN_QTY, TRADE_QTY\u000d\u000a\u0009,STEADY_TIMES, BIGO, WORK_TYPE, INSPECT_SUM, TOT_SURVEY, UPDATE_NO, COUNT_NO, UNIT_NO, RNF_CODE, EDATE, EFLAG \u000d\u000a) VALUES(\u000d\u000a\u0009:MARKET_CODE, :AREA_CODE, :ITEM_CODE, :KIND_CODE, :SURVEY_DATE, :SURVEY_GRADE, :TODAY_PRICE, :YESDAY_PRICE, :IN_QTY, :TRADE_QTY\u000d\u000a\u0009,:STEADY_TIMES, :BIGO, :WORK_TYPE, :INSPECT_SUM, :TOT_SURVEY, :UPDATE_NO, :COUNT_NO, :UNIT_NO, :RNF_CODE, :EDATE, :EFLAG\u000d\u000a)','2013-12-03 16:25:06.731000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_JOB RESTART WITH 2
/*C11*/SET SCHEMA PUBLIC
SET PASSWORD DIGEST 'c12e01f2a13ff5587e1e9e4aedb8242d'
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/DELETE FROM TBL_CONFIG_JOB WHERE JOB_ID='JOB-1'
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-1','AGENT-1','\uc720\ud1b5\uacf5\uc0ac','AGENT','11:00','SELECT * FROM if_src_job1 WHERE eflag=''I'' AND TO_CHAR(edate,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','INSERT INTO if_src_job1 (\u000d\u000a\u0009MARKET_CODE,AREA_CODE,ITEM_CODE,KIND_CODE,SURVEY_DATE,SURVEY_GRADE,INSPECT_SUM,TOT_SURVEY,UPDATE_NO,COUNT_NO,UNIT_NO,RNF_CODE\u000d\u000a\u0009,TODAY_PRICE,YESDAY_PRICE,IN_QTY,TRADE_QTY,STEADY_TIMES,BIGO,WORK_TYPE\u000d\u000a) SELECT \u000d\u000a\u0009a.MARKET_CODE,a.AREA_CODE,a.ITEM_CODE,a.KIND_CODE,a.SURVEY_DATE,a.SURVEY_GRADE,a.INSPECT_SUM,a.TOT_SURVEY,a.UPDATE_NO,a.COUNT_NO,a.UNIT_NO,a.RNF_CODE\u000d\u000a\u0009,b.TODAY_PRICE,b.YESDAY_PRICE,b.IN_QTY,b.TRADE_QTY,b.STEADY_TIMES,b.BIGO,b.WORK_TYPE\u000d\u000aFROM\u000d\u000a\u0009src_job1_part_a a\u000d\u000a\u0009\u0009LEFT OUTER JOIN src_job1_part_b b\u000d\u000a\u0009\u0009ON a.MARKET_CODE=b.MARKET_CODE\u000d\u000aWHERE\u000d\u000a\u0009TO_CHAR(a.SURVEY_DATE,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','UPDATE if_src_job1 SET EFLAG=:EFLAG WHERE MARKET_CODE=:MARKET_CODE','org.hsqldb.jdbcDriver','jdbc:hsqldb:hsql://localhost/testdb','sa','sa','INSERT INTO if_tgt_job1 (\u000d\u000a\u0009MARKET_CODE, AREA_CODE, ITEM_CODE, KIND_CODE, SURVEY_DATE, SURVEY_GRADE, TODAY_PRICE, YESDAY_PRICE, IN_QTY, TRADE_QTY\u000d\u000a\u0009,STEADY_TIMES, BIGO, WORK_TYPE, INSPECT_SUM, TOT_SURVEY, UPDATE_NO, COUNT_NO, UNIT_NO, RNF_CODE, EDATE, EFLAG \u000d\u000a) VALUES(\u000d\u000a\u0009:MARKET_CODE, :AREA_CODE, :ITEM_CODE, :KIND_CODE, :SURVEY_DATE, :SURVEY_GRADE, :TODAY_PRICE, :YESDAY_PRICE, :IN_QTY, :TRADE_QTY\u000d\u000a\u0009,:STEADY_TIMES, :BIGO, :WORK_TYPE, :INSPECT_SUM, :TOT_SURVEY, :UPDATE_NO, :COUNT_NO, :UNIT_NO, :RNF_CODE, :EDATE, :EFLAG\u000d\u000a)','2013-12-03 16:25:06.731000','2013-12-03 16:28:26.983000')
COMMIT
DELETE FROM TBL_CONFIG_JOB WHERE JOB_ID='JOB-1'
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-1','AGENT-1','\uc720\ud1b5\uacf5\uc0ac \uc1a1\uc2e01','AGENT','11:00','SELECT * FROM if_src_job1 WHERE eflag=''I'' AND TO_CHAR(edate,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','INSERT INTO if_src_job1 (\u000d\u000a\u0009MARKET_CODE,AREA_CODE,ITEM_CODE,KIND_CODE,SURVEY_DATE,SURVEY_GRADE,INSPECT_SUM,TOT_SURVEY,UPDATE_NO,COUNT_NO,UNIT_NO,RNF_CODE\u000d\u000a\u0009,TODAY_PRICE,YESDAY_PRICE,IN_QTY,TRADE_QTY,STEADY_TIMES,BIGO,WORK_TYPE\u000d\u000a) SELECT \u000d\u000a\u0009a.MARKET_CODE,a.AREA_CODE,a.ITEM_CODE,a.KIND_CODE,a.SURVEY_DATE,a.SURVEY_GRADE,a.INSPECT_SUM,a.TOT_SURVEY,a.UPDATE_NO,a.COUNT_NO,a.UNIT_NO,a.RNF_CODE\u000d\u000a\u0009,b.TODAY_PRICE,b.YESDAY_PRICE,b.IN_QTY,b.TRADE_QTY,b.STEADY_TIMES,b.BIGO,b.WORK_TYPE\u000d\u000aFROM\u000d\u000a\u0009src_job1_part_a a\u000d\u000a\u0009\u0009LEFT OUTER JOIN src_job1_part_b b\u000d\u000a\u0009\u0009ON a.MARKET_CODE=b.MARKET_CODE\u000d\u000aWHERE\u000d\u000a\u0009TO_CHAR(a.SURVEY_DATE,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','UPDATE if_src_job1 SET EFLAG=:EFLAG WHERE MARKET_CODE=:MARKET_CODE','org.hsqldb.jdbcDriver','jdbc:hsqldb:hsql://localhost/testdb','sa','sa','INSERT INTO if_tgt_job1 (\u000d\u000a\u0009MARKET_CODE, AREA_CODE, ITEM_CODE, KIND_CODE, SURVEY_DATE, SURVEY_GRADE, TODAY_PRICE, YESDAY_PRICE, IN_QTY, TRADE_QTY\u000d\u000a\u0009,STEADY_TIMES, BIGO, WORK_TYPE, INSPECT_SUM, TOT_SURVEY, UPDATE_NO, COUNT_NO, UNIT_NO, RNF_CODE, EDATE, EFLAG \u000d\u000a) VALUES(\u000d\u000a\u0009:MARKET_CODE, :AREA_CODE, :ITEM_CODE, :KIND_CODE, :SURVEY_DATE, :SURVEY_GRADE, :TODAY_PRICE, :YESDAY_PRICE, :IN_QTY, :TRADE_QTY\u000d\u000a\u0009,:STEADY_TIMES, :BIGO, :WORK_TYPE, :INSPECT_SUM, :TOT_SURVEY, :UPDATE_NO, :COUNT_NO, :UNIT_NO, :RNF_CODE, :EDATE, :EFLAG\u000d\u000a)','2013-12-03 16:25:06.731000','2013-12-03 16:29:01.979000')
COMMIT
DELETE FROM TBL_CONFIG_JOB WHERE JOB_ID='JOB-1'
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-1','AGENT-1','\uc720\ud1b5\uacf5\uc0ac \uc1a1\uc2e0#1','AGENT','11:00','SELECT * FROM if_src_job1 WHERE eflag=''I'' AND TO_CHAR(edate,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','INSERT INTO if_src_job1 (\u000d\u000a\u0009MARKET_CODE,AREA_CODE,ITEM_CODE,KIND_CODE,SURVEY_DATE,SURVEY_GRADE,INSPECT_SUM,TOT_SURVEY,UPDATE_NO,COUNT_NO,UNIT_NO,RNF_CODE\u000d\u000a\u0009,TODAY_PRICE,YESDAY_PRICE,IN_QTY,TRADE_QTY,STEADY_TIMES,BIGO,WORK_TYPE\u000d\u000a) SELECT \u000d\u000a\u0009a.MARKET_CODE,a.AREA_CODE,a.ITEM_CODE,a.KIND_CODE,a.SURVEY_DATE,a.SURVEY_GRADE,a.INSPECT_SUM,a.TOT_SURVEY,a.UPDATE_NO,a.COUNT_NO,a.UNIT_NO,a.RNF_CODE\u000d\u000a\u0009,b.TODAY_PRICE,b.YESDAY_PRICE,b.IN_QTY,b.TRADE_QTY,b.STEADY_TIMES,b.BIGO,b.WORK_TYPE\u000d\u000aFROM\u000d\u000a\u0009src_job1_part_a a\u000d\u000a\u0009\u0009LEFT OUTER JOIN src_job1_part_b b\u000d\u000a\u0009\u0009ON a.MARKET_CODE=b.MARKET_CODE\u000d\u000aWHERE\u000d\u000a\u0009TO_CHAR(a.SURVEY_DATE,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','UPDATE if_src_job1 SET EFLAG=:EFLAG WHERE MARKET_CODE=:MARKET_CODE','org.hsqldb.jdbcDriver','jdbc:hsqldb:hsql://localhost/testdb','sa','sa','INSERT INTO if_tgt_job1 (\u000d\u000a\u0009MARKET_CODE, AREA_CODE, ITEM_CODE, KIND_CODE, SURVEY_DATE, SURVEY_GRADE, TODAY_PRICE, YESDAY_PRICE, IN_QTY, TRADE_QTY\u000d\u000a\u0009,STEADY_TIMES, BIGO, WORK_TYPE, INSPECT_SUM, TOT_SURVEY, UPDATE_NO, COUNT_NO, UNIT_NO, RNF_CODE, EDATE, EFLAG \u000d\u000a) VALUES(\u000d\u000a\u0009:MARKET_CODE, :AREA_CODE, :ITEM_CODE, :KIND_CODE, :SURVEY_DATE, :SURVEY_GRADE, :TODAY_PRICE, :YESDAY_PRICE, :IN_QTY, :TRADE_QTY\u000d\u000a\u0009,:STEADY_TIMES, :BIGO, :WORK_TYPE, :INSPECT_SUM, :TOT_SURVEY, :UPDATE_NO, :COUNT_NO, :UNIT_NO, :RNF_CODE, :EDATE, :EFLAG\u000d\u000a)','2013-12-03 16:25:06.731000','2013-12-03 16:29:12.961000')
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
drop sequence seq_agent\u000d\u000a
drop sequence seq_job\u000d\u000a
drop sequence seq_log\u000d\u000a
drop table TBL_CONFIG_AGENT\u000d\u000a
drop table TBL_CONFIG_JOB\u000d\u000a
drop table TBL_IF_LOG\u000d\u000a
create table TBL_CONFIG_AGENT (\u000a\u0009agent_id VARCHAR2(4000) not null primary key\u000a\u0009,org_code VARCHAR2(4000)\u000a\u0009,operating_system VARCHAR2(4000)\u000a\u0009,charset VARCHAR2(4000)\u000a\u0009,websvc_user VARCHAR2(4000)\u000a\u0009,websvc_pass VARCHAR2(4000)\u000a\u0009,officer_name VARCHAR2(4000)\u000a\u0009,officer_contact VARCHAR2(4000)\u000a\u0009,sms_use_yn CHAR\u000a\u0009,sms_cell_no VARCHAR2(4000)\u000a\u0009,created_date TIMESTAMP\u000a\u0009,modified_date TIMESTAMP\u000a)\u000d\u000a
create table TBL_CONFIG_JOB (\u000a\u0009job_id VARCHAR2(4000) not null primary key\u000a\u0009,agent_id VARCHAR2(4000)\u000a\u0009,job_name VARCHAR2(4000)\u000a\u0009,job_type VARCHAR2(4000)\u000a\u0009,agent_exec_time VARCHAR2(4000)\u000a\u0009,sql_main VARCHAR2(4000)\u000a\u0009,sql_pre VARCHAR2(4000)\u000a\u0009,sql_post VARCHAR2(4000)\u000a\u0009,jdbc_driver_class_name VARCHAR2(4000)\u000a\u0009,jdbc_url VARCHAR2(4000)\u000a\u0009,jdbc_username VARCHAR2(4000)\u000a\u0009,jdbc_password VARCHAR2(4000)\u000a\u0009,server_sql VARCHAR2(4000)\u000a\u0009,batch_select_count INTEGER\u000a\u0009,created_date TIMESTAMP\u000a\u0009,modified_date TIMESTAMP\u000a)\u000d\u000a
CREATE TABLE TBL_IF_LOG(\u000a\u0009log_id VARCHAR2(4000) primary key\u000a\u0009,agent_id VARCHAR2(4000)\u000a\u0009,job_id VARCHAR2(4000)\u000a\u0009,result_flag CHAR(1)\u000a\u0009,create_date TIMESTAMP\u000a)\u000d\u000a
create sequence seq_agent start with 1 increment by 1 maxvalue 1000000\u000d\u000a
create sequence seq_job start with 1 increment by 1 maxvalue 1000000\u000d\u000a
create sequence seq_log start with 1 increment by 1 maxvalue 1000000\u000d\u000a
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
INSERT INTO TBL_CONFIG_AGENT VALUES('AGENT-1','','Windows','EUC-KR','jack','jackass','\uae40\uae38\ub3d9','011-222-3333','N',NULL,'2013-12-03 17:01:54.509000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_AGENT RESTART WITH 2
INSERT INTO TBL_CONFIG_AGENT VALUES('AGENT-2','','Unix','UTF-8','alice','chain','\ud64d\uae38\ub3d9','012-111-3333','N',NULL,'2013-12-03 17:02:55.612000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_AGENT RESTART WITH 3
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-1','AGENT-1','\uc720\ud1b5\uacf5\uc0ac \uc1a1\uc2e0#1','AGENT','11:00','SELECT * FROM if_src_job1 WHERE EFLAG = ''I''','INSERT INTO if_src_job1 ( MARKET_CODE,AREA_CODE,ITEM_CODE,KIND_CODE,SURVEY_DATE,SURVEY_GRADE,INSPECT_SUM,TOT_SURVEY,UPDATE_NO,COUNT_NO,UNIT_NO,RNF_CODE ,TODAY_PRICE,YESDAY_PRICE,IN_QTY,TRADE_QTY,STEADY_TIMES,BIGO,WORK_TYPE ) SELECT  a.MARKET_CODE,a.AREA_CODE,a.ITEM_CODE,a.KIND_CODE,a.SURVEY_DATE,a.SURVEY_GRADE,a.INSPECT_SUM,a.TOT_SURVEY,a.UPDATE_NO,a.COUNT_NO,a.UNIT_NO,a.RNF_CODE ,b.TODAY_PRICE,b.YESDAY_PRICE,b.IN_QTY,b.TRADE_QTY,b.STEADY_TIMES,b.BIGO,b.WORK_TYPE FROM src_job1_part_a a \u0009LEFT OUTER JOIN src_job1_part_b b \u0009ON a.MARKET_CODE=b.MARKET_CODE WHERE TO_CHAR(a.SURVEY_DATE,''YYYYMMDD'')=TO_CHAR(SYSDATE,''YYYYMMDD'')','\u0009\u0009UPDATE if_src_job1 SET EFLAG=:EFLAG, EDATE=:EDATE WHERE MARKET_CODE=:MARKET_CODE\u0009\u0009','org.hsqldb.jdbcDriver','jdbc:hsqldb:hsql://localhost/testdb','sa','sa','INSERT INTO if_tgt_job1 (\u000d\u000a\u0009MARKET_CODE, AREA_CODE, ITEM_CODE, KIND_CODE, SURVEY_DATE, SURVEY_GRADE, TODAY_PRICE, YESDAY_PRICE, IN_QTY, TRADE_QTY\u000d\u000a\u0009,STEADY_TIMES, BIGO, WORK_TYPE, INSPECT_SUM, TOT_SURVEY, UPDATE_NO, COUNT_NO, UNIT_NO, RNF_CODE, EDATE, EFLAG \u000d\u000a) VALUES(\u000d\u000a\u0009:MARKET_CODE, :AREA_CODE, :ITEM_CODE, :KIND_CODE, :SURVEY_DATE, :SURVEY_GRADE, :TODAY_PRICE, :YESDAY_PRICE, :IN_QTY, :TRADE_QTY\u000d\u000a\u0009,:STEADY_TIMES, :BIGO, :WORK_TYPE, :INSPECT_SUM, :TOT_SURVEY, :UPDATE_NO, :COUNT_NO, :UNIT_NO, :RNF_CODE, :EDATE, :EFLAG\u000d\u000a)',500,'2013-12-03 17:07:33.535000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_JOB RESTART WITH 2
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
INSERT INTO TBL_CONFIG_JOB VALUES('JOB-2','AGENT-1','\uc720\ud1b5\uacf5\uc0ac \uc1a1\uc2e0#2','AGENT','11:00','SELECT * FROM if_src_job2_com_seed WHERE EFLAG = ''I''','INSERT INTO if_src_job2_com_seed (IDX, COM_NAME, ITEM_CD, ITEM_NM, ITEM_IMG, DTL_IMG, SUBJECT, ITEM_SPEC, CAUTION) SELECT IDX, COM_NAME, ITEM_CD, ITEM_NM, ITEM_IMG, DTL_IMG, SUBJECT, ITEM_SPEC, CAUTION FROM COM_SEED','UPDATE if_src_job2_com_seed SET EFLAG=:EFLAG, EDATE=:EDATE WHERE IDX=:IDX\u0009\u0009\u0009','oracle.jdbc.driver.OracleDriver','jdbc:oracle:thin:@10.10.10.27:1521:iAEIS','affis','affis00','INSERT INTO if_tgt_job2 (\u000d\u000a\u0009IDX, COM_NAME, ITEM_CD, ITEM_NM, ITEM_IMG, DTL_IMG, SUBJECT, ITEM_SPEC, CAUTION, EDATE, EFLAG\u000d\u000a) VALUES (\u000d\u000a\u0009:IDX, :COM_NAME, :ITEM_CD, :ITEM_NM, :ITEM_IMG, :DTL_IMG, :SUBJECT, :ITEM_SPEC, :CAUTION, :EDATE, :EFLAG\u000d\u000a)',500,'2013-12-03 17:28:00.806000',NULL)
COMMIT
ALTER SEQUENCE PUBLIC.SEQ_JOB RESTART WITH 3
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
DISCONNECT
